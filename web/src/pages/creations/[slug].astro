---
import client from "../../../graphql/client";
import type { Creation } from "../../../graphql/generated/sdk";

export type Props = {
    creation: Creation;
};

export const getStaticPaths = async () => {
    const response = await client().allCreation({
        limit: -1,
        offset: 0,
    });
    const creations = response.allCreation;

    return creations.map((creation) => {
        const slug = creation.slug?.current;

        if (!slug) {
            throw `Undefined creation slug : cration[${creation?._id}]`;
        }

        return {
            params: { slug: creation?.slug?.current },
            props: { creation },
        };
    });
};

const { creation } = Astro.props;
---

<article>
    <h1>{creation?.slug?.current}</h1>
</article>
